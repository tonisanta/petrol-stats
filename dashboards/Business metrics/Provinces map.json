{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"canDelete":true,"slug":"provinces-map","url":"/d/c6641ed5-e40c-4f8d-9797-6dfc8bb4f03e/provinces-map","expires":"0001-01-01T00:00:00Z","created":"2023-12-29T21:51:31Z","updated":"2023-12-30T22:56:41Z","updatedBy":"admin","createdBy":"admin","version":30,"hasAcl":false,"isFolder":false,"folderId":2,"folderUid":"bf62d5f7-bbf8-48b4-833e-d6049ab91275","folderTitle":"Business metrics","folderUrl":"/dashboards/f/bf62d5f7-bbf8-48b4-833e-d6049ab91275/business-metrics","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":true,"canEdit":true,"canDelete":true}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":3,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"mixed","uid":"-- Mixed --"},"description":"","gridPos":{"h":22,"w":15,"x":0,"y":0},"id":1,"options":{"code":{"language":"html","showLineNumbers":false,"showMiniMap":false},"content":"\u003ciframe id=\"map-iframe\" src=\"http://localhost:5000/reports/province/diesel\" \r\n        title=\"Petrol map\" width=\"100%\" height=\"100%\"\u003e\r\n\u003c/iframe\u003e\r\n\r\n\u003cscript\u003e  \r\n  productUrl = `${product}`\r\n  if (productUrl == \"diesel_premium\") {\r\n    productUrl = \"dieselPremium\"\r\n  }\r\n\r\n  templateUrl = `http://localhost:5000/reports/province/${productUrl}?include_outliers=${outliers}`  \r\n  document.getElementById(\"map-iframe\").src = templateUrl  \r\n\u003c/script\u003e","mode":"html"},"pluginVersion":"10.2.2","targets":[{"dataset":"mysql","datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"editorMode":"builder","format":"table","rawSql":"","refId":"A"}],"title":"Price ${product} by province","type":"text"},{"datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-GrYlRd"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","fillOpacity":80,"gradientMode":"scheme","hideFrom":{"legend":false,"tooltip":false,"viz":false},"lineWidth":1,"scaleDistribution":{"type":"linear"},"thresholdsStyle":{"mode":"off"}},"fieldMinMax":false,"mappings":[],"thresholds":{"mode":"percentage","steps":[{"color":"green","value":null},{"color":"#EAB839","value":80},{"color":"red","value":90}]},"unit":"currencyEUR"},"overrides":[]},"gridPos":{"h":22,"w":9,"x":15,"y":0},"id":3,"options":{"barRadius":0,"barWidth":1,"fullHighlight":false,"groupWidth":0.7,"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":false},"orientation":"horizontal","showValue":"auto","stacking":"none","tooltip":{"mode":"multi","sort":"desc"},"xTickLabelRotation":0,"xTickLabelSpacing":0},"pluginVersion":"10.2.2","targets":[{"dataset":"petrolstations","datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT ${product}, r.region_name as Province\r\nFROM petrolstations.price_by_province pbp\r\nINNER JOIN petrolstations.regions r on (r.region_code = province_id)\r\nWHERE pbp.execution_id = (SELECT execution_id from price_by_province ORDER BY id desc limit 1)\r\nAND (${outliers} = true OR pbp.province_id NOT IN (\"35\",\"38\",\"51\",\"52\"))\r\norder by ${product} desc\r\n","refId":"petrol95","sql":{"columns":[{"parameters":[{"name":"created_date","type":"functionParameter"}],"type":"function"}],"groupBy":[],"limit":50},"table":"price_by_community"}],"title":"Sorted prices","transformations":[],"type":"barchart"}],"refresh":"","schemaVersion":38,"tags":[],"templating":{"list":[{"current":{"selected":true,"text":"Petrol 95","value":"petrol95"},"hide":0,"includeAll":false,"label":"Product","multi":false,"name":"product","options":[{"selected":true,"text":"Petrol 95","value":"petrol95"},{"selected":false,"text":"Petrol 98","value":"petrol98"},{"selected":false,"text":"Diesel","value":"diesel"},{"selected":false,"text":"Diesel Premium","value":"dieselPremium"}],"query":"Petrol 95 : petrol95, Petrol 98 : petrol98, Diesel : diesel, Diesel Premium : diesel_premium","queryValue":"","skipUrlSync":false,"type":"custom"},{"current":{"selected":true,"text":"false","value":"false"},"hide":0,"includeAll":false,"label":"Outliers","multi":false,"name":"outliers","options":[{"selected":true,"text":"false","value":"false"},{"selected":false,"text":"true","value":"true"}],"query":"false,true","queryValue":"","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-6h","to":"now"},"timepicker":{},"timezone":"","title":"Provinces map","uid":"c6641ed5-e40c-4f8d-9797-6dfc8bb4f03e","version":30,"weekStart":""}}