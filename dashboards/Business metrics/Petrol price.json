{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"canDelete":true,"slug":"petrol-price","url":"/d/a491cf7a-3057-4322-a294-4bf4046aebad/petrol-price","expires":"0001-01-01T00:00:00Z","created":"2023-11-14T23:26:08Z","updated":"2024-01-13T18:05:58Z","updatedBy":"admin","createdBy":"admin","version":45,"hasAcl":false,"isFolder":false,"folderId":2,"folderUid":"bf62d5f7-bbf8-48b4-833e-d6049ab91275","folderTitle":"Business metrics","folderUrl":"/dashboards/f/bf62d5f7-bbf8-48b4-833e-d6049ab91275/business-metrics","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":true,"canEdit":true,"canDelete":true}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"grafana","uid":"-- Grafana --"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":1,"links":[],"liveNow":false,"panels":[{"datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"description":"","fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"line","fillOpacity":0,"gradientMode":"none","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":2400000,"lineInterpolation":"linear","lineStyle":{"fill":"solid"},"lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"none"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"currencyEUR"},"overrides":[]},"gridPos":{"h":17,"w":9,"x":0,"y":0},"id":3,"options":{"legend":{"calcs":[],"displayMode":"list","placement":"bottom","showLegend":true},"tooltip":{"mode":"single","sort":"none"}},"pluginVersion":"10.2.2","targets":[{"dataset":"petrolstations","datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT ${product:csv}, created_date, r.region_name\r\nFROM petrolstations.price_by_province \r\nINNER JOIN petrolstations.regions r on r.region_code = province_id\r\nWHERE r.region_code IN ($province)\r\n  AND $__timeFilter(created_date)\t","refId":"petrol95","sql":{"columns":[{"parameters":[{"name":"created_date","type":"functionParameter"}],"type":"function"}],"groupBy":[],"limit":50},"table":"price_by_community"}],"title":"Historical prices","transformations":[{"id":"prepareTimeSeries","options":{"format":"multi"}}],"type":"timeseries"},{"datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"fieldConfig":{"defaults":{"color":{"mode":"continuous-GrYlRd"},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]},"unit":"currencyEUR"},"overrides":[]},"gridPos":{"h":17,"w":9,"x":9,"y":0},"id":4,"options":{"displayMode":"basic","minVizHeight":10,"minVizWidth":0,"namePlacement":"auto","orientation":"horizontal","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"showUnfilled":true,"valueMode":"color"},"pluginVersion":"10.2.2","targets":[{"dataset":"petrolstations","datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"editorMode":"code","format":"table","rawQuery":true,"rawSql":"SELECT ${product:csv}, created_date, r.region_name\r\nFROM petrolstations.price_by_province pbp\r\nINNER JOIN petrolstations.regions r on (r.region_code = province_id)\r\nWHERE r.region_code IN ($province)\r\n  AND pbp.execution_id = (SELECT execution_id from price_by_province ORDER BY id desc limit 1)\r\n","refId":"petrol95","sql":{"columns":[{"parameters":[{"name":"created_date","type":"functionParameter"}],"type":"function"}],"groupBy":[],"limit":50},"table":"price_by_community"}],"title":"Current prices","transformations":[{"id":"prepareTimeSeries","options":{"format":"multi"}}],"type":"bargauge"}],"refresh":"30m","schemaVersion":38,"tags":[],"templating":{"list":[{"current":{"selected":true,"text":["A Coru√±a","Islas Baleares"],"value":["15","07"]},"datasource":{"type":"mysql","uid":"cbe54dca-1126-4c64-ad13-72f44144e1e3"},"definition":"select r.region_code  AS  __value\n     , r.region_name  AS  __text\nfrom regions r\norder by r.region_name;","hide":0,"includeAll":true,"label":"Province","multi":true,"name":"province","options":[],"query":"select r.region_code  AS  __value\n     , r.region_name  AS  __text\nfrom regions r\norder by r.region_name;","refresh":1,"regex":"","skipUrlSync":false,"sort":0,"type":"query"},{"current":{"selected":true,"text":["All"],"value":["$__all"]},"hide":0,"includeAll":true,"label":"Product","multi":true,"name":"product","options":[{"selected":true,"text":"All","value":"$__all"},{"selected":false,"text":"Petrol 95","value":"petrol95"},{"selected":false,"text":"Petrol 98","value":"petrol98"},{"selected":false,"text":"Diesel","value":"diesel"},{"selected":false,"text":"Diesel Premium","value":"diesel_premium"}],"query":"Petrol 95 : petrol95, Petrol 98 : petrol98, Diesel : diesel, Diesel Premium : diesel_premium","queryValue":"","skipUrlSync":false,"type":"custom"}]},"time":{"from":"now-1h","to":"now"},"timepicker":{},"timezone":"","title":"Petrol price","uid":"a491cf7a-3057-4322-a294-4bf4046aebad","version":45,"weekStart":""}}