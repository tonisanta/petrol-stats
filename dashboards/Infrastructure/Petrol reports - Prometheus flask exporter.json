{"meta":{"type":"db","canSave":true,"canEdit":true,"canAdmin":true,"canStar":true,"canDelete":true,"slug":"petrol-reports-prometheus-flask-exporter","url":"/d/_eX4mpl3/petrol-reports-prometheus-flask-exporter","expires":"0001-01-01T00:00:00Z","created":"2024-01-14T17:41:38Z","updated":"2024-01-14T18:21:50Z","updatedBy":"admin","createdBy":"admin","version":12,"hasAcl":false,"isFolder":false,"folderId":4,"folderUid":"d56def68-1a58-49fa-93b2-2a3c32be6fa9","folderTitle":"Infrastructure","folderUrl":"/dashboards/f/d56def68-1a58-49fa-93b2-2a3c32be6fa9/infrastructure","provisioned":false,"provisionedExternalId":"","annotationsPermissions":{"dashboard":{"canAdd":true,"canEdit":true,"canDelete":true},"organization":{"canAdd":true,"canEdit":true,"canDelete":true}}},"dashboard":{"annotations":{"list":[{"builtIn":1,"datasource":{"type":"datasource","uid":"grafana"},"enable":true,"hide":true,"iconColor":"rgba(0, 211, 255, 1)","name":"Annotations \u0026 Alerts","type":"dashboard"}]},"editable":true,"fiscalYearStartMonth":0,"graphTooltip":0,"id":17,"links":[],"liveNow":false,"panels":[{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":0},"hiddenSeries":false,"id":2,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"10.2.2","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"$$hashKey":"object:214","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"expr":"rate(flask_http_request_duration_seconds_count{status=\"200\"}[30s])","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Requests per second","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:376","format":"short","logBase":1,"show":true},{"$$hashKey":"object:377","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"fieldConfig":{"defaults":{"color":{"mode":"palette-classic"},"custom":{"axisBorderShow":false,"axisCenteredZero":false,"axisColorMode":"text","axisLabel":"","axisPlacement":"auto","barAlignment":0,"drawStyle":"bars","fillOpacity":100,"gradientMode":"hue","hideFrom":{"legend":false,"tooltip":false,"viz":false},"insertNulls":false,"lineInterpolation":"linear","lineWidth":1,"pointSize":5,"scaleDistribution":{"type":"linear"},"showPoints":"auto","spanNulls":false,"stacking":{"group":"A","mode":"normal"},"thresholdsStyle":{"mode":"off"}},"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":80}]}},"overrides":[]},"gridPos":{"h":7,"w":7,"x":12,"y":0},"id":13,"links":[],"options":{"legend":{"calcs":[],"displayMode":"hidden","placement":"right","showLegend":false},"tooltip":{"mode":"multi","sort":"none"}},"pluginVersion":"10.2.2","targets":[{"$$hashKey":"object:140","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"editorMode":"code","expr":"increase(flask_http_request_total[1m])","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"HTTP {{ status }}","range":true,"refId":"A"}],"title":"Total requests per minute","type":"timeseries"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":5,"x":19,"y":0},"hiddenSeries":false,"id":4,"legend":{"avg":true,"current":true,"max":true,"min":false,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"10.2.2","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[{"$$hashKey":"object:1922","alias":"errors","color":"#c15c17"}],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"$$hashKey":"object:766","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"editorMode":"code","expr":"sum(rate(flask_http_request_duration_seconds_count{status!=\"200\"}[30s]))","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"errors","range":true,"refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Errors per second","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:890","format":"short","logBase":1,"show":true},{"$$hashKey":"object:891","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":7},"hiddenSeries":false,"id":6,"legend":{"alignAsTable":true,"avg":false,"current":true,"max":false,"min":false,"rightSide":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"10.2.2","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"$$hashKey":"object:146","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"expr":"rate(flask_http_request_duration_seconds_sum{status=\"200\"}[30s])\n/\nrate(flask_http_request_duration_seconds_count{status=\"200\"}[30s])","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Average response time [30s]","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1004","format":"s","label":"","logBase":1,"show":true},{"$$hashKey":"object:1005","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"fieldConfig":{"defaults":{"mappings":[],"thresholds":{"mode":"absolute","steps":[{"color":"green","value":null},{"color":"red","value":0.8},{"color":"orange","value":0.9},{"color":"green","value":1}]},"unit":"short"},"overrides":[]},"gridPos":{"h":7,"w":12,"x":12,"y":7},"id":11,"links":[],"options":{"colorMode":"value","graphMode":"area","justifyMode":"auto","orientation":"auto","reduceOptions":{"calcs":["lastNotNull"],"fields":"","values":false},"textMode":"auto","wideLayout":true},"pluginVersion":"10.2.2","targets":[{"$$hashKey":"object:1079","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"editorMode":"code","expr":"increase(flask_http_request_duration_seconds_bucket{status=\"200\",le=\"0.25\"}[30s]) \n/ ignoring (le) increase(flask_http_request_duration_seconds_count{status=\"200\"}[30s])","format":"time_series","instant":false,"interval":"","intervalFactor":1,"legendFormat":"{{ path }}","refId":"A"}],"title":"Requests under 250ms","type":"stat"},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"description":"","fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":0,"y":14},"hiddenSeries":false,"id":15,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"10.2.2","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"$$hashKey":"object:426","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"expr":"histogram_quantile(0.5, rate(flask_http_request_duration_seconds_bucket{status=\"200\"}[30s]))","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Request duration [s] - p50","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"$$hashKey":"object:1280","format":"none","logBase":1,"show":true},{"$$hashKey":"object:1281","format":"short","logBase":1,"show":true}],"yaxis":{"align":false}},{"aliasColors":{},"bars":false,"dashLength":10,"dashes":false,"datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"fill":1,"fillGradient":0,"gridPos":{"h":7,"w":12,"x":12,"y":14},"hiddenSeries":false,"id":16,"legend":{"alignAsTable":true,"avg":true,"current":true,"max":true,"min":true,"rightSide":true,"show":true,"sort":"avg","sortDesc":true,"total":false,"values":true},"lines":true,"linewidth":1,"links":[],"nullPointMode":"null","options":{"alertThreshold":true},"percentage":false,"pluginVersion":"10.2.2","pointradius":5,"points":false,"renderer":"flot","seriesOverrides":[],"spaceLength":10,"stack":false,"steppedLine":false,"targets":[{"$$hashKey":"object:426","datasource":{"type":"prometheus","uid":"d610e29a-811b-4f67-ab55-e029dbf8ff7b"},"expr":"histogram_quantile(0.9, rate(flask_http_request_duration_seconds_bucket{status=\"200\"}[30s]))","format":"time_series","interval":"","intervalFactor":1,"legendFormat":"{{ path }}","refId":"A"}],"thresholds":[],"timeRegions":[],"title":"Request duration [s] - p90","tooltip":{"shared":true,"sort":0,"value_type":"individual"},"type":"graph","xaxis":{"mode":"time","show":true,"values":[]},"yaxes":[{"format":"short","logBase":1,"show":true},{"format":"short","logBase":1,"show":true}],"yaxis":{"align":false}}],"refresh":"5s","schemaVersion":38,"tags":["Python","Flask"],"templating":{"list":[]},"time":{"from":"now-5m","to":"now"},"timepicker":{"refresh_intervals":["3s"],"time_options":["5m","15m","1h","6h","12h","24h","2d","7d","30d"]},"timezone":"","title":"Petrol reports - Prometheus flask exporter","uid":"_eX4mpl3","version":12,"weekStart":""}}